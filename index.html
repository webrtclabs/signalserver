<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on http://github.com/jonrohan -->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen"/>
  <link rel="stylesheet" href="stylesheets/pygment_trac.css"/>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/script.js"></script>

  <title>Signalserver for webrtc over node</title>
  <meta name="description" content="websockets signal server for webrtc based video chats">

  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">Signalserver for webrtc over node</h1>
    </header>
    <div id="container">
      <p class="tagline">websockets signal server for webrtc based video chats</p>
      <div id="main" role="main">
        <div class="download-bar">
        <div class="inner">
          <a href="https://github.com/webrtclabs/signalserver/tarball/master" class="download-button tar"><span>Download</span></a>
          <a href="https://github.com/webrtclabs/signalserver/zipball/master" class="download-button zip"><span>Download</span></a>
          <a href="https://github.com/webrtclabs/signalserver" class="code">View Signalserver for webrtc over node on GitHub</a>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">
          <h4>
<a name="websocket-over-nodejs--demo" class="anchor" href="#websocket-over-nodejs--demo"><span class="octicon octicon-link"></span></a><a href="https://github.com/webrtclabs/signalserver/">WebSocket over Node.js</a> / <a href="https://www.quickstreamhost.com">Demo</a>
</h4>

<p>This experiment is using <strong>WebSocket over Node.js</strong> for signaling.</p>

<h1></h1>

<h4>
<a name="install-via-npm" class="anchor" href="#install-via-npm"><span class="octicon octicon-link"></span></a>Install via <code>npm</code>
</h4>

<pre><code>npm install websocket-over-nodejs
</code></pre>

<p>and run the <code>signaler.js</code> nodejs file:</p>

<pre><code>node node_modules/websocket-over-nodejs/signaler.js
</code></pre>

<h1></h1>

<p>Otherwise, follow these steps:</p>

<ol>
<li>Download and extract <a href="https://github.com/webrtclabs/signalserver/archive/master.zip"><strong>ZIP file</strong></a> of this repository then copy <code>folder-location</code>.</li>
<li>Open <strong>Node.js command prompt</strong>.</li>
<li>Type command <code>cd folder-location</code> where <code>folder-location</code> can be <code>C:\websocket-over-nodejs</code>.</li>
<li>Type <code>node signaler</code> to run the node.js server.</li>
</ol><p>OK, now you can listen websocket URL like this:</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">websocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="s1">'ws://localhost:8888/'</span><span class="p">);</span>
</pre></div>

<h1></h1>

<h4>
<a name="if-you-want-to-deploy-your-application" class="anchor" href="#if-you-want-to-deploy-your-application"><span class="octicon octicon-link"></span></a>If you want to deploy your application</h4>

<p>First of all; change <strong>subdomain</strong> in the <code>package.json</code> file:</p>

<pre><code>{
  "name": "just-a-name",
  "subdomain": "must-be-unique",
  "scripts": {
    "start": "signaler.js"
  },
  "version": "0.0.0",
  "engines": {
    "node": "0.10.x"
  },
  "dependencies": {
    "websocket": "1.0.x"
  }
}
</code></pre>

<ol>
<li>Create an account at <code>nodejitsu</code>
</li>
<li>Use same <strong>Node.js command prompt</strong> window</li>
<li>Type <code>jitsu deploy</code> </li>
</ol><p>and you're done!</p>

<p><strong>Remember:</strong> <code>jitsu deploy</code> command will deploy the entire directory containing all all files including <code>node_modules</code> (i.e. dependencies).</p>

<p>Now, you can listen your nodejitsu server like this:</p>

<div class="highlight highlight-javascript"><pre><span class="c1">// Remember, must include port "80"!</span>
<span class="kd">var</span> <span class="nx">websocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="s1">'ws://subdomain.jit.su:80'</span><span class="p">);</span>
</pre></div>

<h1></h1>

<h4>
<a name="how-to-use" class="anchor" href="#how-to-use"><span class="octicon octicon-link"></span></a>How to use?</h4>

<p>In <code>ui.js</code> files you can find <code>openSocket</code> method; or in all libraries; you can find <code>openSignalingChannel</code> method.</p>

<div class="highlight highlight-javascript"><pre><span class="c1">// ws://wsnodejs.jit.su:80</span>


<span class="kd">var</span> <span class="nx">SIGNALING_SERVER</span> <span class="o">=</span> <span class="s1">'ws://'</span> <span class="o">+</span> <span class="nb">document</span><span class="p">.</span><span class="nx">domain</span> <span class="o">+</span> <span class="s1">':1338/'</span><span class="p">;</span>
<span class="nx">connection</span><span class="p">.</span><span class="nx">openSignalingChannel</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">config</span><span class="p">.</span><span class="nx">channel</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">channel</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">channel</span> <span class="o">||</span> <span class="s1">'default-channel'</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">websocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">SIGNALING_SERVER</span><span class="p">);</span>
    <span class="nx">websocket</span><span class="p">.</span><span class="nx">channel</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">channel</span><span class="p">;</span>
    <span class="nx">websocket</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">websocket</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
            <span class="nx">open</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">channel</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">channel</span>
        <span class="p">}));</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">callback</span><span class="p">)</span>
            <span class="nx">config</span><span class="p">.</span><span class="nx">callback</span><span class="p">(</span><span class="nx">websocket</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">websocket</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">config</span><span class="p">.</span><span class="nx">onmessage</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
    <span class="p">};</span>
    <span class="nx">websocket</span><span class="p">.</span><span class="nx">push</span> <span class="o">=</span> <span class="nx">websocket</span><span class="p">.</span><span class="nx">send</span><span class="p">;</span>
    <span class="nx">websocket</span><span class="p">.</span><span class="nx">send</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">websocket</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
            <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
            <span class="nx">channel</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">channel</span>
        <span class="p">}));</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>

<h1></h1>

<h4>
<a name="signaling-concepts" class="anchor" href="#signaling-concepts"><span class="octicon octicon-link"></span></a>Signaling Concepts</h4>

<p>Interested to understand WebRTC Signaling Concepts? Read <a href="http://quickstreamhost.com/signalserver">this document</a>.</p>

<h1></h1>

<h4>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h4>

<p>MIT. Copyright (c) 2014 <a href="https://quickstreamhost.com">webrtclabs</a>.</p>
        </article>
      </div>
    </div>
    <footer>
      <div class="owner">
      <p><a href="https://github.com/webrtclabs" class="avatar"><img src="https://2.gravatar.com/avatar/a484478b76a8f399c52904ed85696a5c?d=https%3A%2F%2Fidenticons.github.com%2F9ab84ecd8345fe81792bccfd8c5f0995.png&amp;r=x&amp;s=60" width="48" height="48"/></a> <a href="https://github.com/webrtclabs">webrtclabs</a> maintains <a href="https://github.com/webrtclabs/signalserver">Signalserver for webrtc over node</a></p>


      </div>
      <div class="creds">
        <small>This page generated using <a href="http://pages.github.com/">GitHub Pages</a><br/>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/webrtclabs/signalserver/tarball/master" class="tar">tar</a><a href="https://github.com/webrtclabs/signalserver/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>

  
</body>
</html>
